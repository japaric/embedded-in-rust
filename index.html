<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta name="generator" content="Hugo 0.82.0" />
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="Rust, embedded, development" name="keywords">
<meta content="Jorge Aparicio" name="author">
<meta property="og:title" content="Embedded in Rust">
<meta property="og:url" content="https://blog.japaric.io/">
<meta property="og:description" content="A blog about Rust and embedded stuff">
<meta property="og:type" content="website" />
<title>Embedded in Rust</title>
<link rel="stylesheet" href="https://blog.japaric.io//css/style.css">
<link rel="shortcut icon" href="https://blog.japaric.io//wave.ico">
<link rel="alternate" type="application/atom+xml" title="Embedded in Rust Posts" href="https://blog.japaric.io//index.xml">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">

</head>

<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://blog.japaric.io/"><h1 class="title is-4">Embedded in Rust</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/japaric" target="_blank">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="/index.xml" target="_blank">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/multicore-rtfm/">Real Time For the Masses goes multi-core</a></h1>
      <h2 class="subtitle is-5">June 23, 2019</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/amp">AMP</a>
    
        <a class="button is-link" href="/tags/concurrency">concurrency</a>
    
        <a class="button is-link" href="/tags/multi-core">multi-core</a>
    
        <a class="button is-link" href="/tags/rtfm">rtfm</a>
    
</div>

      
      <div class="content">
        v0.5.0 of Real Time For the Masses (RTFM), the embedded concurrency framework, is coming out soon-ish &ndash; some time after Rust 1.36 is released &ndash; and will include experimental support for homogeneous and heterogeneous multi-core Cortex-M devices. This blog post covers the upcoming multi-core API and includes a refresher on the single-core API.
Heterogeneous support in Î¼AMP But first, one update relevant to multi-core RTFM from the Î¼AMP (microamp) front since the last post: cargo-microamp has gained support for heterogeneous multi-core devices.
        
        ...<a class="button is-link" href="https://blog.japaric.io/multicore-rtfm/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/microamp/">Î¼AMP: Asymmetric Multi-Processing on microcontrollers</a></h1>
      <h2 class="subtitle is-5">May 10, 2019</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/amp">AMP</a>
    
        <a class="button is-link" href="/tags/concurrency">concurrency</a>
    
        <a class="button is-link" href="/tags/multi-core">multi-core</a>
    
</div>

      
      <div class="content">
        An asymmetric multiprocessing (AMP) system is a multiprocessor computer system where not all of the multiple interconnected central processing units (CPUs) are treated equally. &ndash; Wikipedia
 What is Î¼AMP? microamp (styled as Î¼AMP) is a framework (library plus cargo subcommand) for building bare-metal applications that target AMP systems.
This blog post is a deep dive into this framework which serves as the core foundation of the multi-core version of Real Time For the Masses (RTFM), which I&rsquo;ll cover in the next blog post.
        
        ...<a class="button is-link" href="https://blog.japaric.io/microamp/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/stack-analysis-2/">cargo-call-stack, part 2: getting call graph information from rustc</a></h1>
      <h2 class="subtitle is-5">April 13, 2019</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/static-analysis">static analysis</a>
    
        <a class="button is-link" href="/tags/tooling">tooling</a>
    
        <a class="button is-link" href="/tags/functional-safety">functional safety</a>
    
</div>

      
      <div class="content">
        In a previous post I described the current implementation of cargo-call-stack, a static stack usage analysis tool. In the second part of that post I described the problems the tool runs into when dealing with indirect function calls (both function pointer calls and dynamic dispatch) and proposed improving the output of the tool by having rustc inject type information in the LLVM IR it produces.
While discussing that idea with rustc developers they noted that the compiler could emit information that&rsquo;s more relevant to call graph analysis than just the signatures of functions and trait methods.
        
        ...<a class="button is-link" href="https://blog.japaric.io/stack-analysis-2/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/stack-analysis/">Implementing a static stack usage analysis tool</a></h1>
      <h2 class="subtitle is-5">March 13, 2019</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/static-analysis">static analysis</a>
    
        <a class="button is-link" href="/tags/tooling">tooling</a>
    
        <a class="button is-link" href="/tags/functional-safety">functional safety</a>
    
</div>

      
      <div class="content">
        (This blog covers the implementation details of cargo-call-stack v0.1.2. If you are only interested in using the tool these tweets and the README will give you an idea of what it can do.)
Motivation So, why would you ever want to analyze the stack usage of your program at compile time?
The obvious answer is when you want to know if your application can stack overflow at runtime without actually running your program.
        
        ...<a class="button is-link" href="https://blog.japaric.io/stack-analysis/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/rtfm-v4/">RTFM v0.4: &#43;stable, software tasks, message passing and a timer queue</a></h1>
      <h2 class="subtitle is-5">December 19, 2018</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/arm-cortex-m">ARM Cortex-M</a>
    
        <a class="button is-link" href="/tags/concurrency">concurrency</a>
    
        <a class="button is-link" href="/tags/rtfm">RTFM</a>
    
</div>

      
      <div class="content">
        Hey there! It&rsquo;s been a long time since my last post.
Today I&rsquo;m pleased to announce v0.4.0 of the Real Time for The Masses framework (AKA RTFM), a concurrency framework for building real time applications.
The greatest new feature, IMO, is that RTFM now works on stable Rust (1.31+)! ðŸŽ‰ ðŸŽ‰ ðŸŽ‰
This release also packs quite a few new features which I&rsquo;ll briefly cover in this post. For a more throughout explanation of RTFM&rsquo;s task model and its capabilities check out the RTFM book, which includes examples you can run on your laptop (yay for emulation), and the API documentation.
        
        ...<a class="button is-link" href="https://blog.japaric.io/rtfm-v4/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/wd-4-enc28j60/">Weekly driver 4: ENC28J60, Ethernet for your microcontroller</a></h1>
      <h2 class="subtitle is-5">March 13, 2018</h2>
      
      <div class="content">
        It&rsquo;s week number 11 and the weekly driver #4 is out! Last time, I did drivers 1 and 2 so you may be wondering where&rsquo;s driver 3? Driver #3, the MCP3008 (8 channel 10-bit ADC with SPI interface), was covered by @pcein in their blog. Also, as of now there are at least 14 (!) drivers being worked on by the community.
This week I&rsquo;m releasing a driver for the ENC28J60, an Ethernet controller with SPI interface.
        
        ...<a class="button is-link" href="https://blog.japaric.io/wd-4-enc28j60/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/wd-1-2-l3gd20-lsm303dlhc-madgwick/">Weekly driver 1 &amp; 2: L3GD20, LSM303DLHC and Madgwick</a></h1>
      <h2 class="subtitle is-5">February 19, 2018</h2>
      
      <div class="content">
        Oh, time flies. It&rsquo;s already week 8 and we have zero weekly driver posts out there &ndash; don&rsquo;t worry though because there&rsquo;s plenty of drivers and embedded-hal implementations in the works.
To play catch up in this post I&rsquo;ll cover two embedded-hal drivers: the l3gd20 and the lsm303dlhc. The L3GD20 is an IC that contains a gyroscope and exposes I2C and SPI interfaces; the LSM303DLHC is an IC that contains an accelerometer and a magnetometer, and exposes an I2C interface.
        
        ...<a class="button is-link" href="https://blog.japaric.io/wd-1-2-l3gd20-lsm303dlhc-madgwick/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/stack-overflow-protection/">Zero cost stack overflow protection for ARM Cortex-M devices</a></h1>
      <h2 class="subtitle is-5">February 17, 2018</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/arm-cortex-m">ARM Cortex-M</a>
    
        <a class="button is-link" href="/tags/safety">safety</a>
    
</div>

      
      <div class="content">
        One of the core features of Rust is memory safety. Whenever possible the compiler enforces memory safety at compile. One example of this is the borrow checker which prevents data races, iterator invalidation, pointer invalidation and other issues at compile time. Other memory problems like buffer overflows can&rsquo;t be prevented at compile time. In those cases the compiler inserts runtime checks, bounds checks in this case, to enforce memory safety at runtime.
        
        ...<a class="button is-link" href="https://blog.japaric.io/stack-overflow-protection/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/safe-dma/">Memory safe DMA transfers</a></h1>
      <h2 class="subtitle is-5">February 9, 2018</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/i/o">I/O</a>
    
        <a class="button is-link" href="/tags/microcontroller">microcontroller</a>
    
</div>

      
      <div class="content">
        UPDATE Given the comments I&rsquo;ve received so far I think I should more explicitly mention that the context here are systems that lack a MMU and where a memory allocator may or may not be available or desirable, e.g. Cortex-M microcontrollers.
 In this post I&rsquo;ll describe an approach to building memory safe DMA based APIs.
DMA? DMA stands for Direct Memory Access and it&rsquo;s a peripheral used for transferring data between two memory locations in parallel to the operation of the core processor.
        
        ...<a class="button is-link" href="https://blog.japaric.io/safe-dma/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
    <article>
      <h1 class="title"><a href="https://blog.japaric.io/rtfm-v3/">RTFM v0.3.0: safe `&amp;&#39;static mut T` and less locks</a></h1>
      <h2 class="subtitle is-5">January 22, 2018</h2>
      
        <div class="tags">
    
        <a class="button is-link" href="/tags/arm-cortex-m">ARM Cortex-M</a>
    
        <a class="button is-link" href="/tags/concurrency">concurrency</a>
    
        <a class="button is-link" href="/tags/rtfm">RTFM</a>
    
</div>

      
      <div class="content">
        RTFM (Real Time For the Masses) v0.3.0 is out! This blog post will cover the goodies of this new release.
The minor (breaking) release was mainly to become compatible with the new IO model presented in my previous blog post, but a new feature also shipped with this release: safe creation of &amp;'static mut references.
First, let&rsquo;s look at one feature that landed in v0.2.1 but that didn&rsquo;t get documented in this blog, yet it was essential to adapt RTFM to the new IO model:
        
        ...<a class="button is-link" href="https://blog.japaric.io/rtfm-v3/" style="height:28px">
          Read more
          <span class="icon is-small">
            <i class="fa fa-angle-double-right"></i>
          </span>
        </a>
        
      </div>
    </article>
    
  </div>
</section>
<section class="section">
  <div class="container">
    <nav class="level is-mobile">
      <div class="level-left">
        <div class="level-item">
          
          <a class="button is-disabled">
            <span class="icon is-small is-marginless">
              <i class="fa fa-angle-left"></i>
            </span>
            Newer
          </a>
          
        </div>
      </div>
      <div class="level-right is-marginless">
        <div class="level-item">
          
          <a class="button" href="/page/2/">
            Older
            <span class="icon is-small is-marginless">
              <i class="fa fa-angle-right"></i>
            </span>
          </a>
          
        </div>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container has-text-centered">
    <p><a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png" /></a><br/>Jorge Aparicio</p>
  </div>
</section>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/tomorrow-night.min.css" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/armasm.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/c.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/diff.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/llvm.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/rust.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/shell.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>



